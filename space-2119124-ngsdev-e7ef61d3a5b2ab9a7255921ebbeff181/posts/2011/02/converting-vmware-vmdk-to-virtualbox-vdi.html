<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<link href='../../../exports.css' rel='stylesheet'>
<link href='../../../exports.css' rel='stylesheet'>

</head>
<body>
<div id='wrap'>
<div id='header'>
<h1>ngsdev.org</h1>
<h2>This is an archived post
This is an archived post
</h2>
</div>
<div id='content'><div id='nav'>
<a href="../../../posts/2012/01/livecycling-db-ruby.html">Previous</a>
&nbsp; 
<a href="../../../index.html">Index</a>
&nbsp; 
<a href="../../../posts/2011/02/nodejs-mysql-native.html">Next</a>
</div>
<div class='post'>
<div class='post_header'>
<h3>Converting VMWare .vmdk to VirtualBox .vdi</h3>
<div class='post_info'>
<span class='post_time'>February 28 2011, 10:04 AM</span>
<span class='author'>&nbsp;by Atsushi Nagase</span>
</div>
</div>
<div class='post_body'><p>VMWare で作成した仮想端末を VirtualBox に移行するのに、ハマったのでメモです。</p>

<ol>
<li><em>Virtual Machine Library</em> から VM を選択、コンテキストメニューから <em>Settings</em> を選択、もしくは <code>CMD+E</code> で設定画面を表示</li>
<li><em>HardDisks</em> を選択</li>
<li><em>Split into 2 GB Files</em> のチェックを外し、<em>Apply</em> ボタンをクリック</li>
<li><em>Virtual Machine Library</em> から VM を選択、コンテキストメニューから <em>Show In Finder</em> を選択</li>
<li><em>Q.app</em> をダウンロード + インストール。<a href="http://www.kju-app.org/">Q &ndash; [kju:]</a></li>
<li><p><em>Terminal.app</em> などを使って cli で、以下のコマンドを実行</p>

<div class="CodeRay">
  <div class="code"><pre>$ cd ~/Documents/Virtual\ Machines
 $ /Applications/Q.app/Contents/MacOS/qemu-img convert $VMMACHINE$.vmwarevm/$VMDISK$.vmdk raw-file.bin
 $ /Applications/VirtualBox.app/Contents/MacOS/VBoxManage convertdd raw-file.bin $VMMACHINE$.vdi
 $ rm raw-file.bin</pre></div>
</div>
</li>
<li><p><em>.vdi</em> ファイルは、自分の管理しやすい場所に移動します。</p></li>
<li><em>VirtualBox.app</em> を起動。</li>
<li>ツールバーから、<em>New</em> ボタンをクリック。ウィザードにしたがって、Name / OS / Version / Memory を然るべき値に設定</li>
<li><em>Virtual Hard Disk</em> の画面まできたら <em>Book Hard Disk</em> はチェック、<em>Use existing hard disk</em> を選択し、プルダウン右にある、参照アイコンをクリックして、<em>.vdi</em> ファイルを選択。ウィザードを完了させます。</li>
<li><p>cli から、以下のコマンドを実行します。</p>

<div class="CodeRay">
  <div class="code"><pre>$ /Applications/VirtualBox.app/Contents/MacOS/VBoxManage modifyvdi $VMMACHINE$.vdi compact</pre></div>
</div>
</li>
<li><p><em>VirtualBox.app</em> の <em>VirtualBox Manager</em> から、VM を選択し、コンテキストメニューから、または<code>CMD+S</code> で <em>Settings</em> を開き、<em>Storage</em> に移動。</p></li>
<li><em>SATA Controller</em> の下に、<em>.vdi</em> ファイルが入っているので、選択してコンテキストメニューから <em>Remove Attachment</em> を選択</li>
<li><em>IDE Controller</em> を選択して、コンテキストメニューから <em>Add HardDisk</em> を選択、<em>Choose existing disk</em> を選択し、<em>.vdi</em> ファイルを選択。<em>OK</em> ボタンで設定完了</li>
</ol>


<p>以上で移行が完了しました。<br />
Mac OS X 10.6.6 / VMWare Fusion 2.0.6 / VirtualBox 4.0.4、VM は CentOS-5.5 32 bit でした。</p>

<p>参考にしたサイト</p>

<ul>
<li><a href="http://mariusvw.com/2009/08/29/converting-from-vmware-vmdk-to-virtualbox-vdi-on-mac-os-x/">Converting from VMware (vmdk) to VirtualBox (vdi) on Mac OS X</a></li>
<li><a href="http://serverfault.com/questions/51965/mounting-opening-virtualbox-disk-image-vdi-on-linux-host">Mounting/opening virtualbox disk image (vdi) on linux host</a></li>
</ul></div>
<div class='post_tags'>
<h4>Tags</h4>
<div class='post_tags_list'>centos, macosx, virtualbox, vm, vmware</div>
</div>
<div class='post_responses'>
<h4>7382 views and 0 responses</h4>
<ul class='post_responses list'>
</ul>
</div>
</div>
</div>
</div>
</body>
</html>
